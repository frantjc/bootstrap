---
- name: Bootstrap system
  hosts: all
  tasks:
    - name: Install vscode
      ansible.builtin.include_role:
        name: vscode

    - name: Install openrct2
      ansible.builtin.include_role:
        name: openrct2

    - name: Install curseforge
      ansible.builtin.include_role:
        name: curseforge

    # - name: Install nerdctl
    #   ansible.builtin.include_role:
    #     name: nerdctl

    - name: Install Homebrew
      ansible.builtin.include_role:
        name: homebrew

    - name: Install formulas
      community.general.homebrew:
        name:
          - dagger/tap/dagger
          - go
          - golangci-lint
          - goreleaser
          - k9s
          - kind
          - kubectx
          - kubernetes-cli
          - node
          - yq

    - name: Install casks
      community.general.homebrew_cask:
        name:
          - frantjc/tap/forge
          - frantjc/tap/rvglsm

    - name: Install Zinit
      ansible.builtin.include_role:
        name: zinit

    - name: Configure ai
      ansible.builtin.include_role:
        name: ai

    - name: Configure aliases
      ansible.builtin.include_role:
        name: aliases

    - name: Configure xdg
      ansible.builtin.include_role:
        name: xdg

    - name: Install spotdl
      ansible.builtin.include_role:
        name: spotdl

    - name: Install snap packages
      become: true
      community.general.snap:
        name:
          - discord
          - ghostty
          - spotify
          - steam

    - name: Install flatpak packages
      community.general.flatpak:
        method: user
        name:
          - at.vintagestory.VintageStory
          - chat.revolt.RevoltDesktop
          - com.github.iwalton3.jellyfin-media-player
          - https://mickael9.github.io/rvgl-flatpak/rvgl.flatpakref
        state: present

    - name: Install Odamex
      ansible.builtin.include_role:
        name: odamex
