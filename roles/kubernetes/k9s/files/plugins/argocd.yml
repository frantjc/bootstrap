plugins:
  refresh:
    shortCut: Shift-R
    description: Refresh ArgoCD Application
    scopes:
      - apps
    background: true
    command: kubectl
    args:
      - annotate
      - application
      - --namespace=$NAMESPACE
      - $NAME
      - argocd.argoproj.io/refresh=normal

  hard-refresh:
    shortCut: Shift-H
    description: Hard refresh ArgoCD Application
    scopes:
      - apps
    background: true
    command: kubectl
    args:
      - annotate
      - application
      - --namespace=$NAMESPACE
      - $NAME
      - argocd.argoproj.io/refresh=normal

  disable-auto-sync:
    shortCut: Shift-V
    description: Disable ArgoCD Application auto sync
    scopes:
      - apps
    background: true
    command: kubectl
    args:
      - patch
      - applications
      - --namespace=$NAMESPACE
      - $NAME
      - --type=json
      - '-p=[{"op":"replace", "path": "/spec/syncPolicy", "value": {}}]'

  enable-auto-sync:
    shortCut: Shift-B
    description: Enable ArgoCD Application auto sync
    scopes:
      - apps
    background: true
    command: kubectl
    args:
      - patch
      - applications
      - --namespace=$NAMESPACE
      - $NAME
      - --type=merge
      - '-p={"spec":{"syncPolicy":{"automated":{"prune":true,"selfHeal":true},"syncOptions":["ApplyOutOfSyncOnly=true","CreateNamespace=true","PruneLast=true","PrunePropagationPolicy=foreground"]}}}'
